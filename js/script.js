!function(){const e=document.querySelector("canvas");e.height=innerHeight,e.width=innerWidth;const t=e.getContext("2d");let i=0;if(!t)return;function l(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}let s=[],n=[];class h{constructor(e,i){this.x=e,this.y=i,t.beginPath(),t.fillStyle="yellow",t.arc(e,i,20,0,2*Math.PI),t.fill(),t.closePath(),s.push(this)}draw(){t.beginPath(),t.fillStyle="yellow",t.arc(this.x,this.y,20,0,2*Math.PI),t.fill(),t.closePath()}}new h(e.width/2,e.height/2);let o={};e.addEventListener("mousedown",e=>{let t=(new Date).getTime();o={time:t,x:e.clientX,y:e.clientY}}),e.addEventListener("mouseup",h=>{let a=Number((new Date).getTime())-Number(o.time);const r=(h.clientX-o.x)/(a/1e3),c=(h.clientY-o.y)/(a/1e3);new class{constructor(e,i,l,s,h){this.x=e,this.y=i,this.vx=l,this.vy=s,this.style=h,t.beginPath(),t.fillStyle=h||"blue",t.arc(e,i,20,0,2*Math.PI),t.fill(),t.closePath(),n.push(this),this.collided=!1}draw(){t.beginPath(),t.fillStyle=this.style||"blue",s.forEach(t=>{let s=l(t,this),h=(t.x-this.x)/s*2e5/(s*s),o=(t.y-this.y)/s*2e5/(s*s);if(this.x=this.x+this.vx/60,this.y=this.y+this.vy/60,this.vx=this.vx+h,this.vy=this.vy+o,l(this,t)<=40||1==this.collided||this.x<-40||this.x>40+e.width||this.y>e.height+40||this.y<-40)return i-=200,n=n.filter(e=>e!=this),void(this.collided=!0)});let h=0;if(n.forEach(e=>{e!=this&&l(this,e)<=40&&(e.collided=!0,this.collided=!0,h++)}),h>0)return n=n.filter(e=>e!=this),void(i-=50*h);t.arc(this.x,this.y,20,0,2*Math.PI),t.fill(),t.closePath()}}(o.x,o.y,r,c)}),e.addEventListener("contextmenu",e=>{e.preventDefault(),new h(e.clientX,e.clientY)});let a=!0;function r(){t.fillStyle="black",t.fillRect(0,0,e.width,e.height),i+=n.length*s.length*5,0==n.length&&(i-=1),t.fillStyle="white",a?(t.font="48px Comic Sans",t.fillText(`Your Score: ${i}`,50,50),t.font="18px Comic Sans",t.fillText("Press H for help",80,80),s.forEach(e=>e.draw()),n.forEach(e=>{e.draw()}),window.requestAnimationFrame(r)):(t.font="20px Comic Sans",t.fillStyle="white",t.fillText("Left Click creates planets, slide while click to give initial speed",10,50),t.fillText("Right Click creates Stars",10,80),t.fillText("As long as any planet lives, Score keeps increasing, otherwise penalty.",10,140),t.fillText("The more the celestial bodies, more the score gained per second",10,170),t.fillText("If planet's center is outside the universe, it causes planet's destruction.",10,200),t.fillText("Collision with any celestial body results in penalty",10,110),t.fillText("Press Esc to continue game",10,230),t.fillText("Created by Naveen(@nveenjain) on github, twitter, gmail",10,260))}window.requestAnimationFrame(r),window.addEventListener("keydown",e=>{72==e.keyCode?a=!1:27==e.keyCode&&(a=!0,r())})}();
