!function(){const e=document.querySelector("canvas");e.height=innerHeight,e.width=innerWidth;const t=e.getContext("2d");let i=0;const l="ontouchstart"in document.documentElement;let n=!1;const s=2e5,o=l?10:20;if(!t)throw new Error("not gonna happen :P");function h(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}let a=[],c=[];function r(t,l){if(t===this)return;let n=h(t,this),a=(l||s)*((t.x-this.x)/n)/(n*n),r=(l||s)*((t.y-this.y)/n)/(n*n);return this.vx=this.vx+a,this.vy=this.vy+r,h(this,t)<=2*o||1==this.collided||this.x<-2*o||this.x>2*o+e.width||this.y>e.height+2*o||this.y<-2*o?(i-=200,this.collided=!0,void(c=c.filter(e=>e!=this))):void 0}class d{constructor(e,i,l,n,s){this.x=e,this.y=i,this.vx=l,this.vy=n,this.style=s,t.beginPath(),t.fillStyle=s||"blue",t.arc(e,i,o,0,2*Math.PI),t.fill(),t.closePath(),c.push(this),this.collided=!1}draw(){t.beginPath(),t.fillStyle=this.style||"blue",a.forEach(e=>r.call(this,e)),this.x=this.x+this.vx/60,this.y=this.y+this.vy/60;let e=0;if(c.forEach(t=>{r.call(this,t,15e4),t!=this&&h(this,t)<=2*o&&(t.collided=!0,this.collided=!0,e++)}),e>0)return c=c.filter(e=>e!=this),void(i-=50*e);t.arc(this.x,this.y,o,0,2*Math.PI),t.fill(),t.closePath()}}class f{constructor(e,i){this.x=e,this.y=i,t.beginPath(),t.fillStyle="yellow",t.arc(e,i,o,0,2*Math.PI),t.fill(),t.closePath(),a.push(this)}draw(){t.beginPath(),t.fillStyle="yellow",t.arc(this.x,this.y,o,0,2*Math.PI),t.fill(),t.closePath()}}new f(e.width/2,e.height/2);let u={};function y(e){if(n){let t=(new Date).getTime();u={time:t,x:e.clientX,y:e.clientY}}}function x(e){if(n){let t=Number((new Date).getTime())-Number(u.time);const i=(e.clientX-u.x)/(t/1e3),l=(e.clientY-u.y)/(t/1e3);new d(u.x,u.y,i,l)}else n=!0,g()}function w(e){e.preventDefault(),new f(e.clientX,e.clientY)}l?(e.addEventListener("touchstart",e=>{y(e.changedTouches[0])}),e.addEventListener("touchend",e=>{x(e.changedTouches[0])}),e.addEventListener("contextmenu",w)):(e.addEventListener("mousedown",y),e.addEventListener("mouseup",x),e.addEventListener("contextmenu",w));function g(){t.fillStyle="black",t.fillRect(0,0,e.width,e.height),i+=c.length*a.length*5,0==c.length&&(i-=1),t.fillStyle="white",n?(l?(t.font="30px Comic Sans",t.fillText(`Your Score: ${i}`,50,50)):(t.font="48px Comic Sans",t.fillText(`Your Score: ${i}`,50,50),t.font="18px Comic Sans",t.fillText("Press H for help",80,80)),a.forEach(e=>e.draw()),c.forEach(e=>{e.draw()}),window.requestAnimationFrame(g)):l?(t.font="12px Comic Sans",t.fillStyle="white",t.fillText("Touch and slide to creates planets and to give initial speed",10,50),t.fillText("Touch and hold to create stars",10,80),t.fillText("As long as any planet lives, Score keeps increasing, otherwise penalty.",10,140),t.fillText("The more the celestial bodies, more the score gained per second",10,170),t.fillText("If planet's center is outside the universe, it causes planet's destruction.",10,200),t.fillText("Collision with any celestial body results in penalty",10,110),t.fillText("Click anywhere to continue game",10,230)):(t.font="20px Comic Sans",t.fillStyle="white",t.fillText("Left Click creates planets (blue), slide while click to give initial speed",10,50),t.fillText("Right Click creates Stars (yellow)",10,80),t.fillText("As long as any planet lives, Score keeps increasing, otherwise penalty.",10,140),t.fillText("The more the celestial bodies, more the score gained per second",10,170),t.fillText("If planet's center is outside the universe, it causes planet's destruction.",10,200),t.fillText("Collision with any celestial body results in penalty",10,110),t.fillText("Press Esc/Click to continue game",10,230),t.fillText("Created by Naveen(@nveenjain) on github, twitter, gmail",10,260))}window.requestAnimationFrame(g),window.addEventListener("keydown",e=>{72==e.keyCode?n=!1:27==e.keyCode&&(n=!0,g())})}();
